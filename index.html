<!DOCTYPE html>
<!--
    Tangram: real-time WebGL rendering for OpenStreetMap

    http://github.com/tangrams/tangram
    http://mapzen.com
-->
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Tangram Play</title>

    <!-- Tangram -->
    <link rel="stylesheet" href="src/js/vendor/leaflet/leaflet.css">
    <script type="text/javascript" src="src/js/vendor/leaflet/leaflet.js"></script>
    <script type="text/javascript" src="https://mapzen.com/tangram/0.2/tangram.min.js"></script>

    <!-- Glsl Sandbox in a canvas -->
    <script type="text/javascript" src="https://rawgit.com/patriciogonzalezvivo/glslCanvas/master/build/GlslCanvas.min.js"></script>
    <!-- Application -->
    <style>
        body {
            margin: 0px;
            border: 0px;
            padding: 0px;
            overflow: hidden;
        }

        .tangram-play-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        /* MOBILE MESSAGE */

        .mobile-message,
        .mobile-message * {
            box-sizing: border-box;
        }

        .mobile-message {
            display: none;
            position: relative;
            padding: 10px;
            padding-right: 48px;
            font-size: 16px;
            font-family: var(--font-family);
            font-weight: 400;
            background-color: lightyellow;
        }

        .mobile-message strong {
            font-weight: normal;
            color: darkred;
        }

        .mobile-message-close {
            position: absolute;
            top: 0;
            right: 0;
            width: 48px;
            height: 48px;
            padding-top: 8px;
            font-size: 20px;
            text-align: center;
            color: darkred;
        }
    </style>

    <!-- CodeMirror-Tangram specific -->
    <link type="text/css" rel="stylesheet" href="build/css/main.css">

  </head>

  <body>
    <div id="mobile-message" class="mobile-message">
        <div id="dismiss-mobile-message" class="mobile-message-close">&#215;</div>
        <strong>Hey there!</strong> We think youâ€™re on a mobile device, but the Tangram Play editor is best suited for desktop devices. You can close this message to continue or come back later from a desktop browser. <strong>Thanks for visiting!</strong>
    </div>

    <div id='tangram_play_wrapper' class='tangram-play-container'>

        <div class='tp-menu-container'>
            <div class='tp-menu-bar'>
                <h1>Tangram Play</h1>
                <ul class='tp-menu-items'>
                    <li class='tp-menu-item tp-menu-button-new' data-tooltip='New style'><i class='btm bt-file'></i><span class='tp-menu-item-label'>New style</span></li>
                    <li class='tp-menu-item tp-menu-button-open' data-tooltip='Open style'><i class='btm bt-plus-square'></i><span class='tp-menu-item-label'>Open style</span></li>
                    <li class='tp-menu-item tp-menu-button-export' data-tooltip='Export style'><i class='btm bt-download'></i><span class='tp-menu-item-label'>Export style</span></li>
                    <li class='tp-menu-item tp-menu-item-private' data-tooltip='Share'><i class='btm bt-share'></i></li>
                </ul>
                <ul class='tp-menu-items tp-menu-right'>
                    <li class='tp-menu-item tp-menu-item-private' data-tooltip='Refresh map'><i class='btm bt-sync'></i></li>
                    <li class='tp-menu-item tp-menu-item-private' data-tooltip='Settings'><i class='btm bt-gear'></i></li>
                    <li class='tp-menu-item tp-menu-button-help' data-tooltip='Documentation and help' data-tooltip-alignment='right'><a href='https://github.com/tangrams/tangram-docs#tangram-documentation' target='_blank'><i class='btm bt-question-circle'></i><span class='tp-menu-item-label'>Help</span></a></li>
                    <li class='tp-menu-item tp-menu-item-private tp-menu-sign-in' data-tooltip='Sign in'><span class='tp-menu-sign-in-label'>Sign in</span><i class='btm bt-sign-in'></i></li>
                </ul>
            </div>
            <div class='tp-menu-dropdowns'>
                <div class='tp-menu-dropdown tp-menu-dropdown-open'>
                    <ul>
                        <li class='tp-menu-open-file'><i class='btm bt-folder'></i><span class='tp-menu-item-label'>Open a file</span></li>
                        <li class='tp-menu-open-example'><i class='btm bt-map'></i><span class='tp-menu-item-label'>Choose example</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class='tp-core-container'>
            <div id='map' class='tp-map-container'></div>
            <div class='tp-map-nav' id='map-nav'></div>
            <div class='tp-map-loading' id='map-loading'></div>
            <div class='tp-divider' id='divider'><span class='tp-divider-affordance'></span></div>
            <div id='content'>
                <div id='editor'></div>
            </div>
        </div>

        <div class='tp-shield'></div>
        <div class='tp-modal'>
            <p class='tp-modal-text'></p>
            <div class='tp-modal-buttons'>
                <button class='tp-modal-cancel'><i class='btm bt-times'></i> Cancel</button>
                <button class='tp-modal-confirm'><i class='btm bt-check'></i> Continue</button>
            </div>
        </div>
        <div class='tp-modal tp-example-modal'>
            <p class='tp-modal-text'></p>
            <div class='tp-example-list'></div>
            <div class='tp-modal-buttons'>
                <button id='example-cancel' class='tp-modal-cancel'><i class='btm bt-times'></i> Cancel</button>
                <button id='example-confirm' class='tp-modal-confirm' disabled><i class='btm bt-check'></i> Open</button>
            </div>
        </div>
        <div class='tp-filedrop-container'>
            <div class='tp-filedrop-indicator'>
                <div class='tp-filedrop-icon'><i class='btm bt-upload'></i></div>
                <div class='tp-filedrop-label'>Drop a file here to open</div>
            </div>
        </div>
    </div>

    <!-- IDE -->
    <script type="text/javascript" src="build/js/tangram-play.js"></script>
    <script>
        // const flags = parseFeatureFlags(query);

        // if (flags['fullmenu'] === true) {
        //     document.getElementById('tangram_play_wrapper').querySelector('.tp-menu-bar').classList.add('tp-debug-full-menu');
        // }

        // function parseFeatureFlags(query) {
        //     var qstr = query['flags'];
        //     var flags = {};
        //     if (!qstr) return flags;
        //     var values = qstr.split(',');
        //     for (var i in values) {
        //         flags[values[i]] = true;
        //     }
        //     return flags;
        // };

        if (isMobile() === true) {
            document.getElementById('mobile-message').style.display = 'block';
            document.getElementById('dismiss-mobile-message').addEventListener('click', function (e) {
                document.getElementById('mobile-message').style.display = 'none';
                tangramPlay.divider.reflow();
            });
        }

        function isMobile () {
          if (/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase()))
            return true;
          else
            return false;
        };

    </script>
  </body>
</html>
